# Упражнение 2: Запуск первого контейнера с готовым образом Python

![Иллюстрация: Мария Фоканова](/images/podman_upr2.png)
*Иллюстрация: Мария Фоканова*

Контейнер создаётся на основе образа. Образ (image) – это шаблон со всем необходимым для запуска приложения: файловой системой, зависимостями, настройками. В ``registry.altlinux.org`` (и других публичных регистрах) доступны готовые образы, например образ Python с предустановленным интерпретатором.

> [https://registry.altlinux.org/image/alt%2Fpython/tag/sisyphus](https://registry.altlinux.org/image/alt%2Fpython/tag/sisyphus)
<!-- ```
https://registry.altlinux.org/image/alt%2Fpython/tag/sisyphus
``` -->

Команда ``podman run`` запускает контейнер из указанного образа. Если образ не найден локально, Podman скачает его. В этом упражнении мы возьмём готовый образ Python и выполним простой Python-код внутри контейнера. В результате увидим, как контейнер изолирует выполнение кода, используя среду образа.

---

## Выбор образа Python

Образы с Python имеют имя python в Alt Registry. В некоторых случаях можно работать с тегом с версией Python (``https://registry.altlinux.org/image/sisyphus%2Fpython``), например 3.12.8. Если тег не указан, по умолчанию используется latest (обычно последняя стабильная версия Python).

## Запуск контейнера с командой Python

Выполним в контейнере простой скрипт без создания файлов:

```bash
podman run --rm registry.altlinux.org/sisyphus/python:latest python3 -c "print('Hello from container')"
```

Разберём команду.

- ``podman run`` – запуск нового контейнера;
- ``--rm`` означает удалить контейнер после завершения;
- ``registry.altlinux.org/sisyphus/python:latest`` – образ из публичного хранилища;
- далее идёт команда, которая выполняется внутри контейнера: python3 -c "<код>".

Здесь Python интерпретатор в контейнере выполнит однострочный скрипт, который печатает строку.

При первом запуске Podman загрузит образ ``python:latest``, что может занять время (образ большой). После скачивания контейнер запустится, выведет ``Hello from container`` и завершится.

## Интерактивная работа в контейнере

Запустим контейнер в интерактивном режиме, чтобы вручную поработать внутри него. Например:

```bash
podman run -it --rm python:latest
```

Флаг ``-it`` запускает контейнер в интерактивном режиме терминала. Полная команда запустит интерпретатор Python внутри контейнера (в составе образа уже установлен интерпретатор python). Мы видим приглашение >>> . Попробуем ввести ``import platform; print(platform.system())``. Должно отобразиться название платформы внутри контейнера - ``Linux``. Для выхода нажмем ``Ctrl+D``. Такой режим полезен для экспериментов или отладки в окружении контейнера.

## Просмотр запущенных контейнеров

В новом терминале выполним ``podman ps`` – эта команда покажет список работающих контейнеров. Во время интерактивной сессии Python видим один контейнер с образом ``python:latest`` в статусе ``Up``. После выхода из Python контейнер завершится, и podman ps не будет его отображать (вместо этого ```podman ps -a``` показал бы остановленные контейнеры).

## Задание для самостоятельной работы

Попрактикуемся с разными образами и командами:

1. Запустите контейнер с другим тегом Python, например ``python:3.12.8`` или ``3.9.20``, и выполните в нём аналогичный вывод текста.

```bash
registry.altlinux.org/sisyphus/python:3.12.8
registry.altlinux.org/p10/python:3.9.20
```

2. Найдите в Alt Registry образ python для ветки P10 (или P11). Запустите
```bash
podman run --rm registry.altlinux.org/p10/python:latest python3 -c "import sys; print(sys.version)"
```
Убедитесь, что Python исполнился и вывел версию интерпретатора.

3. Дополнительно: используем образ ```docker.io/library/hello-world``` для запуска контейнера: ```podman run --rm hello-world```. Ознакомимся с сообщением, которое выводит этот контейнер, и обратим внимание, что оно объясняет работу контейнеров. Текст встроен в образ.

## Ожидаемый итог:
- мы научились запускать готовые образы;
- контейнер с интерпретатором python выполнил Python-код и напечатал сообщение «Hello from container»;
- при интерактивном запуске мы вошли в консоль Python внутри контейнера и убедились, что работаем в изолированной среде Linux;
- контейнеры с разными образами Python корректно запускаются и выполняют указанный код, показывая версию Python или другие результаты.